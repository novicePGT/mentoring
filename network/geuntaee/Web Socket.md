소켓( Client나 Server )과 웹소켓은 IP와 포트를 통한 통신을 한다는 점은 비슷하다.
또한, 둘 다 양방향 통신이 가능하다는 것을 가지고 있다.
하지만, 웹 소켓은 HTTP Layer에서 작동하는 소켓이고, TCP/IP의 소켓과는 레이어가 다르다.

## WebSocket
WebSocket은 다른 말로 HTTP Socket 이라고 한다.
이 웹 소켓의 특징을 보면 아래와 같다
- 연결지향( 양방향 )
- 상태 유지( Stateful )
- 실시간 통신 / 성능
- Handshake 과정에서는 헤더의 비중이 크지만, 한번 연결이 되면 간단한 메세지들이 오고가는 것이 가능하다 -> 경제적.

이 특징들을 통해 웹소켓은 실시간 통신을 할 수 있다.
쉽게 말해 웹에서 실시간 통신을 해야하는 상황에 잘 쓰이는 프로토콜 중 하나이다.
연결이 정상적으로 이루어진다면 서버와 클라이언트 간에 웹소켓 연결이 이루어지고 일정 시간이 지나면 HTTP연결은 자동으로 끊어진다.

## WebSocket Handshake
웹은 HTTP 프로토콜을 사용하는데, 웹소켓 프로토콜을 사용하기 위해서는 HTTP에서 WebSocket으로의 프로토콜 전환을 해야하는데 이 전환하는 과정을 WebSocket Handshake라고 한다.

브라우저는 프로토콜을 HTTP에서 WebSocket으로 전환하려는 요청을 Header에 Upgrade 속성을 추가하여 서버로 보낸다.

이 요청을 받은 서버가 WebSocket 프로토콜을 이해하면 Upgrade 속성을 통해 프로토콜 전환을 동의하게 되고 결과적으로 브라우저와 서버는 웹소켓 프로토콜을 사용하게 된다.
![](https://velog.velcdn.com/images/dymnam/post/1c985079-559a-4a0c-b493-481cbf8d231b/image.png)
웹소켓 프로토콜로 전환되면 HTTP 연결은 중단되며 동일한 TCP/IP 연결을 통해 WebSocket 연결로 대체 된다.
WebSocket 연결은 기본적으로 HTTP( 80 ), HTTPS( 443 )과 동일한 포트를 사용한다.
즉, CORS 적용이나 인증 등의 과정을 기존 HTTP 방식으로 사용할 수 있다.

## WebSocket의 문제점
1. 프로그램 구현에 보다 많은 복잡성을 초래한다.
- 웹 소켓은 HTTP와 달리 Stateful한 Protocol이기 때문에 서버와 클라이언트 간의 연결을 항상 유지해야하고, 비정상적 연결이 끊어졌을 때 적절하게 대응해야 하기 때문이다.

2. 서버와 클라이언트 간의 Socket 연결을 유지하는 것 자체가 비용이 든다.
- 트래픽 양이 많은 서버같은 경우에는 CPU에 큰 부담을 줄 수 있다.

3. 오래된 버전의 웹 브라우저에서는 지원하지 않는다.
